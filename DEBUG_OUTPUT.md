# Debug Output Feature

When running `proxy` with `LOG_LEVEL=DEBUG`, the generated nginx configurations are printed to the log output for easy debugging and verification.

## Usage

### Environment Variable
```bash
LOG_LEVEL=DEBUG ./bin/proxy generate
```

### Command Line Flag
```bash
./bin/proxy generate --log-level DEBUG
```

### Watch Mode with Debug
```bash
LOG_LEVEL=DEBUG ./bin/proxy watch
```

## Example Output

### Stream Config (TCP/UDP)
```
[DEBUG] [Generator] stream config generated:
# Auto-generated by proxy at 2025-12-28T19:28:27+01:00
# DO NOT EDIT MANUALLY - Changes will be overwritten

# Container: web-server (abc123def456)
upstream tcp_80 {
    server 172.17.0.2:8080;
}

server {
    listen 80;
    proxy_pass tcp_80;
    proxy_connect_timeout 10s;
    proxy_timeout 5m;
    proxy_buffer_size 16k;
}

upstream udp_53 {
    server 172.17.0.2:53;
}

server {
    listen 53 udp;
    proxy_pass udp_53;
    proxy_timeout 30s;
    proxy_responses 1;
    proxy_buffer_size 16k;
}
```

### HTTP Config (Hostname Routing)
```
[DEBUG] [Generator] HTTP config generated:
# Auto-generated by proxy at 2025-12-28T19:28:27+01:00
# DO NOT EDIT MANUALLY - Changes will be overwritten

# Container: api-server (xyz789abc123)
upstream http_api_example_com {
    server 172.17.0.3:8080;
}

server {
    listen 80;
    server_name api.example.com;

    location / {
        proxy_pass http://http_api_example_com;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # WebSocket support
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";

        # Timeouts
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }
}
```

## Docker Compose Example

```yaml
services:
  proxy:
    build: .
    environment:
      LOG_LEVEL: DEBUG  # Enable debug output
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - "80:80"
      - "443:443"
```

## Benefits

1. **Troubleshooting**: See exactly what configs are being generated
2. **Verification**: Confirm upstream servers and port mappings are correct
3. **Development**: Validate template changes during development
4. **Auditing**: Review configuration before it's applied to nginx

## Log Levels

- `INFO` (default): Shows config written events with checksums
- `DEBUG`: Shows full generated configs + additional processing details
- `TRACE`: Maximum verbosity (not implemented yet)

## Performance Note

Debug output adds minimal overhead - configs are generated regardless of log level. The only additional work is formatting the output for logging.
